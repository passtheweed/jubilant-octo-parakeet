app.page.home=function(u,f){const a=$("html");const e={init(){new class{constructor(e){var t=f.querySelector(e);this.options={selector:e,breakpoints:{default:{src:t.getAttribute("data-src")}}},t.querySelectorAll("[data-src]").forEach(e=>this.options.breakpoints[e.getAttribute("data-mw")]={src:e.getAttribute("data-src")}),t.innerHTML="",this.responseVideo(this.options),this.resizer()}resizer(){u.addEventListener("resize",()=>this.responseVideo(this.options))}responseVideo(e){var{selector:e,breakpoints:t}=e,e=f.querySelector(e),i=e.getAttribute("data-width-now")||null,n=Math.max.apply(Math,Object.keys(t).filter(e=>e<=f.body.clientWidth).map(Number))||"default";i&&i==n||(e.setAttribute("data-width-now",n),e.src=t[n].src)}}(".hero-video")}},v={osHasReducedMotion(){var e;return!!u.matchMedia&&!!(e=u.matchMedia("(prefers-reduced-motion: reduce)"))&&e.matches},init(){function t(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=f.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){let t=this;if(f.documentElement.contains(t))do{if(t.matches(e))return t}while(null!==(t=t.parentElement||t.parentNode)&&1===t.nodeType);return null}),"function"!=typeof u.CustomEvent&&(t.prototype=u.Event.prototype,u.CustomEvent=t),Math.easeInOutQuad=function(e,t,i,n){return(e/=n/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t};const i=f.getElementsByClassName("js-tab-focus");function n(){0<i.length&&(a(!1),u.addEventListener("keydown",s)),u.removeEventListener("mousedown",n)}function s(e){9===e.keyCode&&(a(!0),u.removeEventListener("keydown",s),u.addEventListener("mousedown",n))}function a(e){var t=e?"":"none";for(let e=0;e<i.length;e++)i[e].style.setProperty("outline",t)}u.addEventListener("mousedown",n);function r(e){var t;this.element=e,this.items=this.element.getElementsByClassName("js-stack-cards__item"),this.scrollingFn=!1,this.scrolling=!1,o(e=this),new IntersectionObserver(function(e){e[0].isIntersecting?this.scrollingFn||function(e){e.scrollingFn=function(){this.scrolling||(this.scrolling=!0,u.requestAnimationFrame(l.bind(this)))}.bind(e),u.addEventListener("scroll",e.scrollingFn)}(this):this.scrollingFn&&(u.removeEventListener("scroll",this.scrollingFn),this.scrollingFn=!1)}.bind(e),{threshold:[0,1]}).observe(e.element),(t=this).element.addEventListener("resize-stack-cards",function(){o(t),l.bind(t)})}function o(t){t.marginY=getComputedStyle(t.element).getPropertyValue("--stack-cards-gap"),i=t,(e=f.createElement("div")).setAttribute("style","opacity:0; visbility: hidden;position: absolute; height:"+i.marginY),i.element.appendChild(e),i.marginY=parseInt(getComputedStyle(e).getPropertyValue("height")),i.element.removeChild(e),t.elementHeight=t.element.offsetHeight;var e,i=getComputedStyle(t.items[0]);t.cardTop=Math.floor(parseFloat(i.getPropertyValue("top"))),t.cardHeight=Math.floor(parseFloat(i.getPropertyValue("height"))),t.windowHeight=u.innerHeight,isNaN(t.marginY)?t.element.style.paddingBottom="0px":t.element.style.paddingBottom=t.marginY*(t.items.length-1)+"px";for(let e=0;e<t.items.length;e++)isNaN(t.marginY)?t.items[e].style.transform="none;":t.items[e].style.transform="translateY("+t.marginY*e+"px)"}function l(){if(!isNaN(this.marginY)){var t=this.element.getBoundingClientRect().top;if(!(0<this.cardTop-t+this.element.windowHeight-this.elementHeight-this.cardHeight+this.marginY+this.marginY*this.items.length))for(let e=0;e<this.items.length;e++){var i=this.cardTop-t-e*(this.cardHeight+this.marginY);0<i?(i=e==this.items.length-1?1:(this.cardHeight-.05*i)/this.cardHeight,this.items[e].style.transform="translateY("+this.marginY*e+"px) scale("+i+")"):this.items[e].style.transform="translateY("+this.marginY*e+"px)"}}this.scrolling=!1}const m=f.getElementsByClassName("js-stack-cards"),e="IntersectionObserver"in u&&"IntersectionObserverEntry"in u&&"intersectionRatio"in u.IntersectionObserverEntry.prototype,c=v.osHasReducedMotion();if(0<m.length&&e&&!c){const p=[];for(let e=0;e<m.length;e++)d=e,p.push(new r(m[d]));let e=!1;const g=new t("resize-stack-cards");function h(){for(let e=0;e<p.length;e++)t=e,p[t].element.dispatchEvent(g);var t}u.addEventListener("resize",function(){clearTimeout(e),e=setTimeout(h,500)})}var d;v.animationsInit()},animationsInit(){$("[data-animation]").each((e,t)=>{var t=$(t),i=t.parents("li").first();const n=t.data();app.animations.animate(n.animation,t.children().first()[0],n.animationPath,n.animationLoop||!1,n.animationAutoplay||!1),n.animationAutoplay||(u[i.attr("id")+"_waypoint"]=new u.Waypoint({element:i[0],handler(e){u[n.animation].play()},offset:"25%"}))})}},r={fetchImages(){const i=$("#exclusive-slider"),n={method:"GET",headers:{apikey:"NDRlODJiM2EtM2UwNi00OTAzLTlhZDktOTZlMDg5YmY4MGYz"},redirect:"follow"};var e=new Promise((t,e)=>{fetch(i.data().albumsApi,n).then(e=>e.text()).then(e=>{e=JSON.parse(e).albums.map(e=>({type:"album",image:(a.data().siteNapiUrl||"https://api.napster.com")+"/imageserver/v2/albums/"+e.id+"/images/300x300.jpg",href:"https://play.napster.com/album/"+e.id,title:e.name+": "+e.artistName,alt:"Album: "+e.name}));t(e)})});const s={method:"GET",headers:{"x-client-id":"98a786f5-6cc9-4950-9532-52214988f44e"},redirect:"follow"};var t=new Promise((t,e)=>{fetch(i.data().videosApi,s).then(e=>e.text()).then(e=>{e=JSON.parse(e).videos.map(e=>({type:"video",image:e.images[0].url,href:"https://play.napster.com/videos/"+e.id,title:e.name,alt:"Video: "+e.name}));t(e)})});Promise.all([e,t]).then(e=>{let t=[];for(e.forEach(e=>{t=t.concat(e)}),t.sort(()=>.5<Math.random()?1:-1);(t=t.concat(t)).length<=60;);60<t.length&&(t=t.slice(0,60));e=Math.ceil(t.length/2);0<t.length&&$("body").addClass("rail-visible"),r.setImages(t.slice(0,e),".slider-top .slider-wrapper",()=>{r.setSlider(".slider-top","smoothscroll")}),r.setImages(t.slice(-e),".slider-bottom .slider-wrapper",()=>{r.setSlider(".slider-bottom","smoothscrollreversed")})})},setImages(e,t,i){const n=$(t);e.forEach(e=>{n.append('<div class="slide"><a href="'+e.href+'" title="'+e.title+'" class="slide-inner"><img src="'+e.image+'" alt="'+e.alt+'"></a></div>')}),setTimeout(()=>{i()},1e3)},setSlider(e,t){var i="> div > div",n="> div > div:first-of-type",s=$(e).width(),a=$(n,e).outerWidth(!1),r=$(n,e).outerHeight(!1);let o=0,l=0;$(i,e).each((e,t)=>{l+=$(t).outerWidth(!1)});var m=s/a,m=Math.ceil(m),c=$(i,e).length,h=4*c,a=($(i,e).slice(0,m).clone().appendTo($(">div",e)),a*c);a<s&&$(i,e).slice(0,m).clone().appendTo($(">div",e)),$(i,e).each((e,t)=>{o+=$(t).outerWidth(!1)}),$(">div",e).css({width:o,height:r}),$("<style type='text/css'>@keyframes "+t+" { 0% { margin-left: 0px; } 100% { margin-left: -"+l+"px; } } "+e+n+" { -webkit-animation: "+t+" "+h+"s linear infinite; -moz-animation: "+t+" "+h+"s linear infinite; -ms-animation: "+t+" "+h+"s linear infinite; -o-animation: "+t+" "+h+"s linear infinite; animation: "+t+" "+h+"s linear infinite; }</style>").appendTo("head")},init(){r.fetchImages()}};return{start:function(){e.init(),v.init(),r.init()}}}(this,this.document),$(()=>{app.page.home.start()});